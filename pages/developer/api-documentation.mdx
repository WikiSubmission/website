import { Callout } from 'nextra/components'

# WikiSubmission API

## Endpoints

* [`/quran`](#quran)
* [`/prayer-times`](#prayer-times)
* [`/library`](#library)
* *More in progress.*

## Base URL

<Callout emoji="🌐"> 
`api.wikisubmission.org`
</Callout>

## Standard Response Structure

The following TypeScript interface outlines the standard format to expect for all JSON responses. For result data types, click [here](/developer/api-types) or navigate to the "API Types" page.

```typescript copy
interface WikiSubmissionResponse<T> {
    /** Whether the request was successful for its intended purpose */
    success: boolean;

    /** The response data */
    results: T | [];

    /** Additional request details */
    metadata: { 
        timestamp: number;
        requestId: string;
        cached: boolean;
    };

    /** The response error, if thrown */
    error?: {
        httpCode: number;
        fault: 'client' | 'server';
        description: string;
        caughtErrors: string[];
        severity: 'low' | 'medium' | 'high';
        timestamp: number = Date.now();
    };
}
```

Note:

* To fully validate responses, ensure no `error` object was returned and the `success` property is true.

## `/quran`

### GET `/quran/:chapter`

Returns data for all verses in the specified chapter.

### GET `/quran/:chapter + :verse`

Returns data for the specified verse(s).
 
<Callout>
 Use ':' as a chapter & verse separator. Use a dash ('-') to define a custom verse range.
</Callout>

Examples:

* ...`/quran/3:5`
* ...`/quran/3:5-8`
* ...`/quran/3:5,3:6,3:7,3:8`

### GET `/quran/search/:query`

Searches the Quran's key text fields. By default, the `verse_text_english`, `verse_header_english`, and `verse_footnote_english` fields are queried.

You can specify certain instructions using query parameters:

* `filter=loose` will ignore the exact order of words in the query
* `highlight=true` will apply a markdown highlight around the query wherever it appears
* `extent=textonly` will not search your query against subtitles and footnotes
* `language=[...]` value can be specified to match against its corresponding text properties (see type definition below for supported languages)

### GET `/quran/randomverse`

Returns a random verse.

### GET `/quran/randomchapter`

Returns a random chapter.

### GET `/quran/data`

Returns the entire Quran in JSON.

<Callout>
 You can add a "`customProperties`" query to the request URL to return **only** return the properties you need (e.g. `.../quran/1/?customProperties=verse_id,verse_text_english`). Use with caution for type-sensitive languages.
</Callout>

## `/prayer-times`

### GET `/prayer-times`

Returns live **prayer times data** for a given query–which may be a city, address, or latitude/longitude coordinate pair.

Example(s):

* .../prayer-times/`?q=new+york`
* .../prayer-times/`?q=400+N+380+E+Provo+Utah`
* .../prayer-times/`?q=51.5072,0.1276`

### Example Response

```json copy
{
    "success": true,
    "httpStatusCode": 200,
    "results": {
        "statusString": "It's currently Isha (began 0h 14m ago). Fajr starts in 1h 57m.",
        "locationString": "London, UK",
        "country": "United Kingdom",
        "countryCode": "GB",
        "region": "England",
        "localTime": "12:08 AM",
        "localTimeIn24h": "00:08",
        "localTimezone": "British Summer Time",
        "localTimezoneId": "Europe/London",
        "coordinates": {
            "latitude": 51.50853,
            "longitude": -0.12574
        },
        "times": {
            "fajr": "2:05 AM",
            "dhuhr": "12:58 PM",
            "asr": "5:10 PM",
            "maghrib": "8:47 PM",
            "isha": "11:54 PM",
            "sunrise": "5:08 AM"
        },
        "timesIn24h": {
            "fajr": "02:05",
            "dhuhr": "12:58",
            "asr": "17:10",
            "maghrib": "20:47",
            "isha": "23:54",
            "sunrise": "05:08"
        },
        "timesInUtc": {
            "fajr": "01:05",
            "dhuhr": "11:58",
            "asr": "16:10",
            "maghrib": "19:47",
            "isha": "22:54",
            "sunrise": "04:08"
        },
        "timesLeft": {
            "fajr": "1h 57m",
            "dhuhr": "12h 50m",
            "asr": "17h 2m",
            "maghrib": "20h 39m",
            "isha": "23h 46m",
            "sunrise": "5h 0m"
        },
        "currentPrayer": "isha",
        "currentPrayerTimeElapsed": "0h 14m",
        "upcomingPrayer": "fajr",
        "upcomingPrayerTimeLeft": "1h 57m",
        "utcOffsetInSeconds": 3600
    },
    "metadata": {
        "timestamp": 1715814521250,
        "requestId": "54A9",
        "cached": false
    }
}
```

## `/library`

### GET `/library/:category/:resource`

Returns known **file content** from our resource library.

`category` values may be one of the following:

* `books`
* `media`
* `submitters-perspectives`
* `research`
* `misc`
* `recitations` (coming soon)

`resource` values depend on the category. For example:

* .../library/books/`quran-the-final-testament`
* .../library/submitters-perspectives/`1988_nov`
* .../library/research/`the-math-miracle-intentional-or-coincidental`

Note:

* All resources are rendered on the browser by default (Content-Disposition header). Add `download=true` to the URL to direct download the resource.
* Adding extensions (.pdf, .png, etc) is optional though we recommend avoiding it as the server will resolve them.